<client
        xmlns:c="jstl"
        diameter-config-uri="diameter/client-stack-config.xml">
    <!--

    -->
    <start
            mode="ALL_PEERS"
            stack-creation-timeout="30000"
            time-unit="MILLISECONDS"/>
    <!--

    -->

    <applicationId vendor-id="0" auth-app-id="4">
        <destination realm="server.brentcroft.com">
            <session session-id="${ c:uuid() }">
                <request command-code="272">
                    <avp code="9000" vendor-id="105" value="green, blue, red"/>
                    <avp code="9001" vendor-id="105" value="1"/>
                    <send>
                        <answer/>
                    </send>
                </request>
            </session>

            <c:while test="${ answer.avps.resultCode != 2001 and varStatus.count &lt; 7 }">
                <session session-id="${ c:uuid() }">
                    <request command-code="272">
                        <c:choose>
                            <c:when test="${ not( empty answer.avps.alphaBetaGamma or empty request.avps.alphaBetaGamma ) }">
                                <avp code="9000" vendor-id="105"
                                     value="${ c:replaceAll( request.avps.alphaBetaGamma, answer.avps.alphaBetaGamma, '' ) }"/>
                            </c:when>
                            <c:otherwise>
                                <avp code="9000" vendor-id="105" value="green, blue, red"/>
                            </c:otherwise>
                        </c:choose>
                        <send>
                            <answer/>
                        </send>
                    </request>
                </session>
            </c:while>
        </destination>
    </applicationId>
    <!--

    -->
    <stop disconnect-cause="0"/>
</client>